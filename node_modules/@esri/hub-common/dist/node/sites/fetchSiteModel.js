"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.fetchSite = exports.fetchSiteModel = void 0;
const __1 = require("..");
/**
 * Returns site model given various kinds of identifier
 *
 * @param identifier - a site item ID, site hostname, enterprise site slug, or full site URL
 * @param hubRequestOptions
 */
function fetchSiteModel(identifier, hubRequestOptions) {
    let prms;
    if (__1.isGuid(identifier)) {
        prms = __1.getSiteById(identifier, hubRequestOptions);
    }
    else {
        let hostnameOrSlug = identifier;
        // get down the the hostname
        hostnameOrSlug = __1.stripProtocol(hostnameOrSlug);
        hostnameOrSlug = hostnameOrSlug.split("/")[0];
        prms = __1.lookupDomain(hostnameOrSlug, hubRequestOptions).then(({ siteId }) => __1.getSiteById(siteId, hubRequestOptions));
    }
    return prms;
}
exports.fetchSiteModel = fetchSiteModel;
/**
 * @private // keep out of docs
 */
/* istanbul ignore next */
function fetchSite(identifier, hubRequestOptions) {
    // tslint:disable-next-line
    console.warn(`@esri/hub-common::fetchSite is deprecated. Please use @esri/hub-common::fetchSiteModel instead`);
    return fetchSiteModel(identifier, hubRequestOptions);
}
exports.fetchSite = fetchSite;
//# sourceMappingURL=fetchSiteModel.js.map