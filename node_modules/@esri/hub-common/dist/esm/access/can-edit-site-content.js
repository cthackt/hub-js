import { includes } from "../utils";
import { getProp } from "../objects";
import { hasBasePriv } from "./has-base-priv";
import { canEditItem } from "./can-edit-item";
export var REQUIRED_PRIVS = [
    "portal:user:createGroup",
    "portal:user:createItem",
    "portal:user:shareToGroup",
    "portal:user:viewOrgGroups",
    "portal:user:viewOrgItems"
];
/**
 * Checks if user has access to content library in Hub
 * In Hub Home context, user access requires additional privileges
 * In initiative context, check is delegated to canEditItem for the initiative site item
 * @param {IItem} item
 * @param {IUser} user
 * @returns {boolean}
 */
export function canEditSiteContent(item, user) {
    var res = false;
    var isDefaultHubHome = getProp(item, "properties.isDefaultHubHome");
    var hasPriv = hasBasePriv(user);
    if (!isDefaultHubHome && hasPriv) {
        res = canEditItem(item, user);
    }
    else if (hasPriv) {
        var userOrgId = user.orgId;
        var itemOrgId = item.orgId;
        var sameOrg = !!userOrgId && userOrgId === itemOrgId;
        if (sameOrg) {
            var privileges_1 = user.privileges || [];
            res = REQUIRED_PRIVS.every(function (privilege) { return includes(privileges_1, privilege); });
        }
    }
    return res;
}
//# sourceMappingURL=can-edit-site-content.js.map