import { getWithDefault } from "../../../objects/get-with-default";
/**
 * @private
 */
export function _consolidateResults(context) {
    var autoAddResult = context.autoAddResult, inviteResult = context.inviteResult, primaryEmailResult = context.primaryEmailResult, secondaryEmailResult = context.secondaryEmailResult;
    var combinedEmailResults;
    if (primaryEmailResult || secondaryEmailResult) {
        var validResults = [primaryEmailResult, secondaryEmailResult].filter(function (r) { return r; });
        var combinedSuccess = validResults.every(function (r) { return r.success; });
        var combinedErrors = validResults.reduce(function (collection, r) { return collection.concat(getWithDefault(r, "errors", [])); }, []);
        combinedEmailResults = {
            success: combinedSuccess
        };
        if (combinedErrors.length) {
            combinedEmailResults.errors = combinedErrors;
        }
    }
    var overallSuccess = [autoAddResult, inviteResult, combinedEmailResults]
        .filter(function (r) { return r; })
        .every(function (r) { return r.success; });
    return {
        success: overallSuccess,
        autoAdd: autoAddResult,
        invite: inviteResult,
        email: combinedEmailResults
    };
}
//# sourceMappingURL=_consolidate-results.js.map