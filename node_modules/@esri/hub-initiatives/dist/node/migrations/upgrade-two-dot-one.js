"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.upgradeToTwoDotOne = void 0;
/* Copyright (c) 2019 Environmental Systems Research Institute, Inc.
 * Apache-2.0 */
const hub_common_1 = require("@esri/hub-common");
/**
 * Apply the 2.0 --> 2.1 Migration to an Initiative Model
 *
 * @param model
 * @protected
 */
function upgradeToTwoDotOne(model) {
    const currVersion = hub_common_1.getProp(model, "item.properties.schemaVersion");
    if (currVersion < 2.1) {
        const clone = hub_common_1.cloneObject(model);
        // store the schemaVersion
        clone.item.properties.schemaVersion = 2.1;
        const collaborationGroupId = hub_common_1.getProp(model, "item.properties.groupId");
        if (collaborationGroupId) {
            clone.item.properties.collaborationGroupId = collaborationGroupId;
            delete clone.item.properties.groupId;
        }
        return clone;
    }
    else {
        return model;
    }
}
exports.upgradeToTwoDotOne = upgradeToTwoDotOne;
//# sourceMappingURL=upgrade-two-dot-one.js.map