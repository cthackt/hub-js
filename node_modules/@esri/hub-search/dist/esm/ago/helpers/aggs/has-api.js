import { getProp, categories } from "@esri/hub-common";
var apiTypes = categories.apiTypes.map(function (type) { return type.toLowerCase(); });
// implements the 'hasApi' facet from AGO results. V3 datasets have this property computed
// during the harvesting process but AGO results need this result computed at runtime
export function hasApiAgg(agoAggregations) {
    if (agoAggregations === void 0) { agoAggregations = {}; }
    var typeAggs = (getProp(agoAggregations, "counts") || []).filter(function (agg) { return agg.fieldName === "type"; })[0];
    if (!typeAggs)
        return { hasApi: {} };
    return typeAggs.fieldValues.reduce(function (formattedAggs, fieldVal) {
        if (apiTypes.indexOf(fieldVal.value) > -1) {
            formattedAggs.hasApi.true += fieldVal.count;
        }
        else {
            formattedAggs.hasApi.false += fieldVal.count;
        }
        return formattedAggs;
    }, { hasApi: { true: 0, false: 0 } });
}
//# sourceMappingURL=has-api.js.map